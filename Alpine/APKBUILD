# Contributor: Emanuele Sorce <emanuele.sorce@hotmail.com>
# Maintainer: Emanuele Sorce <emanuele.sorce@hotmail.com>
pkgname=sturmreader
pkgver=3.2.2
pkgrel=0
pkgdesc="E-Book reader optimized for mobile linux"
url="https://github.com/tronfortytwo/sturmreader"
arch="x86_64"
license="GNU-GPL-3-OR-ABOVE"
depends="musl qt5-qtdeclarative qt5-qtbase qt5-qtwebengine qt5-qtbase-x11 qt5-qtquickcontrols2 poppler-qt5 gettext zlib libstdc++"
makedepends="cmake qt5-qtdeclarative-dev qt5-qtquickcontrols2-dev unzip poppler-qt5-dev gettext-dev libintl"
install=""
subpackages=""
source="https://codeload.github.com/tronfortytwo/sturmreader/zip/master"
builddir="$srcdir/$pkgname-$pkgver"

# Sturm reader has no testing! Not even a --version thing
options="!check"

build() {
	cd "$srcdir"
	unzip -x master
	#cd "$pkgname-$pkgver"
	#cd "$pkgname-master"
	cd "$pkgname-master"
	chmod +x ui/qml/encoder.sh
	mkdir "build"
	cd build
	cmake -DCLICK_MODE=OFF ..
	make
}

package() {
	cd "$srcdir"/"$pkgname-master"/build/
	make DESTDIR="$pkgdir" install
}

sha512sums="c4283cbf96a02252444f6da6af537ae893b3c45838e03ee45ea91e2db139b08de5357700ae62a166f6145753e519f0b54d4fd5f51ec9ad7a99a3919ef3449e77  master"
