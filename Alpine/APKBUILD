# Contributor: Emanuele Sorce <emanuele.sorce@hotmail.com>
# Maintainer: Emanuele Sorce <emanuele.sorce@hotmail.com>
pkgname=sturmreader
pkgver=3.2.2
pkgrel=0
pkgdesc="E-Book reader optimized for mobile linux"
url="https://github.com/tronfortytwo/sturmreader"
arch="x86_64"
license="GNU-GPL-3-OR-ABOVE"
depends="qt5-qtdeclarative qt5-qtquickcontrols2 poppler-qt5 gettext"
makedepends="cmake qt5-qtdeclarative-dev qt5-qtquickcontrols2-dev unzip poppler-qt5-dev gettext-dev libintl"
install=""
subpackages=""
source="https://codeload.github.com/tronfortytwo/sturmreader/zip/master"
builddir="$srcdir/$pkgname-$pkgver"

build() {
	cd "$srcdir"
	unzip -x master
	#cd "$pkgname-$pkgver"
	#cd "$pkgname-master"
	cd "$pkgname-master"
	chmod +x ui/qml/encoder.sh
	mkdir "build"
	cd build
	cmake ..
	make
}

check() {
	# Sturm reader has no testing :|
	#default_check()
	:
}

package() {
	cd "$srcdir"/"$pkgname-master"/build/
	make DESTDIR="$pkgdir" install
}

sha512sums="1d35181c3b42f984f180aa048fa6dc54a3056f0c81cf815454efb0c9e0cf1c0e755794904ab3ac4fbf2a7b8aefc678c2e6e6fc5ef58c00b89b2c3498be7cf8e8  master"
