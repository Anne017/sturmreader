# Contributor: Emanuele Sorce <emanuele.sorce@hotmail.com>
# Maintainer: Emanuele Sorce <emanuele.sorce@hotmail.com>
pkgname=sturmreader
pkgver=3.2.2
pkgrel=0
pkgdesc="E-Book reader optimized for mobile linux"
url="https://github.com/tronfortytwo/sturmreader"
arch="x86_64"
license="GNU-GPL-3-OR-ABOVE"
depends="musl qt5-qtdeclarative qt5-qtbase qt5-qtsvg qt5-qtbase-sqlite qt5-qtwebengine qt5-qtbase-x11 qt5-qtquickcontrols2 qt5-qtquickcontrols poppler-qt5 gettext zlib libstdc++"
makedepends="cmake qt5-qtdeclarative-dev qt5-qtquickcontrols2-dev unzip poppler-qt5-dev gettext-dev libintl"
install=""
subpackages="$pkgname-lang"
source="https://codeload.github.com/tronfortytwo/sturmreader/zip/master"
builddir="$srcdir/$pkgname-$pkgver"

# Sturm reader has no testing! Not even a --version thing
options="!check"

build() {
	cd "$srcdir"
	unzip -x master
	#cd "$pkgname-$pkgver"
	#cd "$pkgname-master"
	cd "$pkgname-master"
	chmod +x ui/qml/encoder.sh
	mkdir "build"
	cd build
	cmake -DCLICK_MODE=OFF ..
	make
}

package() {
	cd "$srcdir"/"$pkgname-master"/build/
	make DESTDIR="$pkgdir" install
}

sha512sums="514043cec53f5cf6eb58c28cfb8fe2d0e60bc5cb2448b260590bfd454f73dadbda035ad3fe4f9f1f18f1aa73d5f2901f5719fa9129a0aa749e1f887b4edd6bd5  master"
